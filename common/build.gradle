apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-kapt'
apply plugin: 'kotlin-parcelize'
apply from: '../tests.gradle'

android {
    compileSdkVersion compileVersion

    defaultConfig {
        minSdkVersion minVersion
        targetSdkVersion targetVersion

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"

        buildConfigField 'String', 'WEBSITE', "\"https://sora.org\""
        buildConfigField 'String', 'SOURCE_LINK', "\"https://github.com/sora-xor/Sora-Android\""
        buildConfigField 'String', 'TELEGRAM_LINK', "\"https://t.me/sora_xor\""
        buildConfigField 'String', 'TELEGRAM_ANNOUNCEMENTS_LINK', "\"https://t.me/sora_announcements\""
        buildConfigField 'String', 'TELEGRAM_HAPPINESS_LINK', "\"https://t.me/sorahappiness\""
        buildConfigField 'String', 'EMAIL', "\"support@sora.org\""
        buildConfigField 'String', 'TWITTER_LINK', "\"https://twitter.com/sora_xor\""
        buildConfigField 'String', 'YOUTUBE_LINK', "\"https://youtube.com/sora_xor\""
        buildConfigField 'String', 'INSTAGRAM_LINK', "\"https://instagram.com/sora_xor\""
        buildConfigField 'String', 'MEDIUM_LINK', "\"https://medium.com/sora_xor\""
        buildConfigField 'String', 'WIKI_LINK', "\"https://wiki.sora.org\""
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_1_8
    }

    buildFeatures {
        viewBinding true
    }

    flavorDimensions "default"

    productFlavors {
        develop {
            buildConfigField "String", "DEFAULT_MARKET_URL", "\"https://sora-xor.github.io/sora-join-page/dev/\""
            buildConfigField "String", "WS_HOST_URL", "\"wss://ws.framenode-3.s3.dev.sora2.soramitsu.co.jp/\""
            buildConfigField "String", "SORA_SCAN_HOST_URL", "\"subquery.q1.dev.sora2.soramitsu.co.jp/\""
            buildConfigField "String", "GENESIS_HASH", "\"bf7f611213e15c54023853eed206508be11ce69d8d94937157e44c7b7564714a\""
            buildConfigField "String", "TYPES_FILE_PATH", "\"dev\""
            dimension 'default'
        }

        adartestnet {
            buildConfigField "String", "DEFAULT_MARKET_URL", "\"https://sora-xor.github.io/sora-join-page/stage/\""
            buildConfigField "String", "WS_HOST_URL", "\"wss://ws.stage.sora2.soramitsu.co.jp/\""
            buildConfigField "String", "SORA_SCAN_HOST_URL", "\"api.subquery.network/sq/sora-xor/sora-staging/\""
            buildConfigField "String", "GENESIS_HASH", "\"cc145a1f96972181accc1785b062ab8c2773ae7c02846ad26d35af9a27571242\""
            buildConfigField "String", "TYPES_FILE_PATH", "\"stage\""
            dimension 'default'
        }

        soralution {
            buildConfigField "String", "DEFAULT_MARKET_URL", "\"https://sora-xor.github.io/sora-join-page/stage/\""
            buildConfigField "String", "WS_HOST_URL", "\"wss://ws.stage.sora2.soramitsu.co.jp/\""
            buildConfigField "String", "SORA_SCAN_HOST_URL", "\"api.subquery.network/sq/sora-xor/sora-staging/\""
            buildConfigField "String", "GENESIS_HASH", "\"cc145a1f96972181accc1785b062ab8c2773ae7c02846ad26d35af9a27571242\""
            buildConfigField "String", "TYPES_FILE_PATH", "\"stage\""
            dimension 'default'
        }

        tsting {
            buildConfigField "String", "DEFAULT_MARKET_URL", "\"https://sora-xor.github.io/sora-join-page/test/\""
            buildConfigField "String", "WS_HOST_URL", "\"wss://ws.tst.sora2.soramitsu.co.jp/\""
            buildConfigField "String", "SORA_SCAN_HOST_URL", "\"subquery.q1.tst.sora2.soramitsu.co.jp/\""
            buildConfigField "String", "GENESIS_HASH", "\"6f1056d58e73f16a5237e96afab618e9623652fa1cef3e67b0111bd6fd6790a7\""
            buildConfigField "String", "TYPES_FILE_PATH", "\"test\""
            dimension 'default'
        }

        production {
            buildConfigField "String", "DEFAULT_MARKET_URL", "\"https://sora-xor.github.io/sora-join-page/\""
            buildConfigField "String", "WS_HOST_URL", "\"wss://ws.alb.sora.org/\""
            buildConfigField "String", "SORA_SCAN_HOST_URL", "\"api.subquery.network/sq/sora-xor/sora\""
            buildConfigField "String", "GENESIS_HASH", "\"7e4e32d0feafd4f9c9414b0be86373f9a1efa904809b683453a9af6856d38ad5\""
            buildConfigField "String", "TYPES_FILE_PATH", "\"prod\""
            dimension 'default'
        }
    }
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])

    implementation project(':core_di')

    implementation kotlinDep

    implementation activityKtxDep
    implementation coreKtxDep
    implementation androidDep
    implementation materialDep
    implementation cardViewDep
    implementation constraintDep

    implementation coroutineAndroidDep
    implementation coroutineDep
    implementation coroutineTestDep

    implementation googlePlayCoreDep

    //implementation soraDep
    implementation novaCryptoDep
    implementation fearlessLibDep
    implementation webSocketLibDep
    implementation ed25519Dep

    implementation lifecycleDep
    kapt lifecycleKaptDep

    implementation loggerDep
    implementation svgDep
    implementation jdenticonDep

    implementation shimmerDep

    implementation daggerDep
    kapt daggerKapt

    implementation datastoreDep
    implementation navigationFragmentDep
    implementation navigationUiDep

    implementation progressButtonDep
    implementation neumorphismDep

    implementation retrofitDep
    implementation gsonConvertedDep
    implementation scalarsConverterDep

    implementation platform(firebaseBomDep)

    implementation(crashlyticsDep) {
        transitive = true
    }

    implementation zXingCoreDep
    implementation zXingEmbeddedDep

    testImplementation jUnitDep
    testImplementation mockitoDep
    testImplementation mockkDep
    testImplementation robolectricDep
    testImplementation robolectricMultidexDep
    testImplementation archCoreTestDep
    testImplementation archFragmentTestDep
    testImplementation project(":test_shared")
}